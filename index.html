<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¤ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒãƒ¼ã‚¿ãƒ«</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <h1>ğŸ“š ãƒã‚¤ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒãƒ¼ã‚¿ãƒ«</h1>
            
            <!-- ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ  -->
            <div id="loginForm" class="login-box">
                <h2>ãƒ­ã‚°ã‚¤ãƒ³</h2>
                <input type="text" id="loginUsername" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å" class="input-field" autocomplete="username">
                <input type="password" id="loginPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" class="input-field" autocomplete="current-password">
                <button id="loginBtn" class="btn btn-primary btn-block">ãƒ­ã‚°ã‚¤ãƒ³</button>
                <div class="login-divider">ã¾ãŸã¯</div>
                <button id="showRegister" class="btn btn-secondary btn-block">æ–°è¦ç™»éŒ²</button>
            </div>
            
            <!-- æ–°è¦ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
            <div id="registerForm" class="login-box" style="display: none;">
                <h2>æ–°è¦ç™»éŒ²</h2>
                <input type="text" id="registerUsername" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼ˆ3æ–‡å­—ä»¥ä¸Šï¼‰" class="input-field" autocomplete="username">
                <input type="password" id="registerPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆ4æ–‡å­—ä»¥ä¸Šï¼‰" class="input-field" autocomplete="new-password">
                <input type="password" id="registerConfirmPassword" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ï¼ˆå†å…¥åŠ›ï¼‰" class="input-field" autocomplete="new-password">
                <button id="registerBtn" class="btn btn-primary btn-block">ç™»éŒ²</button>
                <div class="login-divider">ã¾ãŸã¯</div>
                <button id="showLogin" class="btn btn-secondary btn-block">ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸</button>
            </div>
            
            <p class="login-hint">ğŸ’¡ ãƒ’ãƒ³ãƒˆ: åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§è¤‡æ•°ã®ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™</p>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒª -->
    <div id="appScreen" class="app-screen" style="display: none;">
        <div class="container">
            <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <header class="header">
                <h1>ğŸ“š ãƒã‚¤ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒãƒ¼ã‚¿ãƒ«</h1>
                <div class="header-actions">
                    <input type="text" id="searchInput" placeholder="ğŸ” ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’æ¤œç´¢..." class="search-input">
                    <button id="addCategoryBtn" class="btn btn-primary">â• ã‚«ãƒ†ã‚´ãƒªãƒ¼è¿½åŠ </button>
                    <button id="syncBtn" class="btn btn-sync" title="ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸ">â˜ï¸ åŒæœŸ</button>
                    <button id="importBtn" class="btn btn-secondary">ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                    <button id="exportBtn" class="btn btn-secondary">ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
                    <button id="logoutBtn" class="btn btn-logout" title="ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ">ğŸšª ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
                </div>
            </header>

            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
            <div id="tagFilter"></div>
            <main id="mainContent" class="main-content">
                <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼ã¨ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãŒã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
            </main>

            <!-- çµ±è¨ˆæƒ…å ± -->
            <footer class="footer">
                <div class="stats">
                    <span>ğŸ‘¤ <strong id="currentUser"></strong></span>
                    <span>ã‚«ãƒ†ã‚´ãƒªãƒ¼æ•°: <strong id="categoryCount">0</strong></span>
                    <span>ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯æ•°: <strong id="bookmarkCount">0</strong></span>
                    <span id="syncStatus" class="sync-status">ğŸ’¾ ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜</span>
                </div>
            </footer>
        </div>
    </div>

    <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼è¿½åŠ /ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="categoryModalTitle">ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚’è¿½åŠ </h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <input type="text" id="categoryNameInput" placeholder="ã‚«ãƒ†ã‚´ãƒªãƒ¼åã‚’å…¥åŠ›" class="input-field">
                <input type="color" id="categoryColorInput" value="#4CAF50" class="color-picker">
                <label for="categoryColorInput">ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚«ãƒ©ãƒ¼</label>
            </div>
            <div class="modal-footer">
                <button id="saveCategoryBtn" class="btn btn-primary">ä¿å­˜</button>
                <button id="cancelCategoryBtn" class="btn btn-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>
    </div>

    <!-- ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯è¿½åŠ /ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="bookmarkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="bookmarkModalTitle">ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚’è¿½åŠ </h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <input type="text" id="bookmarkNameInput" placeholder="ã‚µã‚¤ãƒˆåã‚’å…¥åŠ›" class="input-field">
                <input type="url" id="bookmarkUrlInput" placeholder="https://example.com" class="input-field">
                <textarea id="bookmarkDescInput" placeholder="èª¬æ˜ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰" class="input-field" rows="3"></textarea>
            </div>
            <div class="modal-footer">
                <button id="saveBookmarkBtn" class="btn btn-primary">ä¿å­˜</button>
                <button id="cancelBookmarkBtn" class="btn btn-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>
    </div>

    <!-- ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="importModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</h2>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸJSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„</p>
                <input type="file" id="importFileInput" accept=".json" class="input-field">
            </div>
            <div class="modal-footer">
                <button id="confirmImportBtn" class="btn btn-primary">ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                <button id="cancelImportBtn" class="btn btn-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, doc, setDoc, getDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyALXJ7Reo_Stf2YOaEX8zJUWkyMeWSpYr8",
            authDomain: "bookmark-portal.firebaseapp.com",
            projectId: "bookmark-portal",
            storageBucket: "bookmark-portal.firebasestorage.app",
            messagingSenderId: "438604490216",
            appId: "1:438604490216:web:2024d32257bc596257705d"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
        window.firebaseDB = db;
        window.firebaseDoc = doc;
        window.firebaseSetDoc = setDoc;
        window.firebaseGetDoc = getDoc;
        window.firebaseOnSnapshot = onSnapshot;
        window.firebaseCollection = collection;
    </script>

    <script src="app.js"></script>
</body>
</html>
